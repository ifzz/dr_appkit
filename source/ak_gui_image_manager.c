// Public domain. See "unlicense" statement at the end of this file.

#include "../include/easy_appkit/ak_gui_image_manager.h"
#include "nanosvg.h"
#include "nanosvgrast.h"
#include <easy_fs/easy_vfs.h>
#include <easy_gui/easy_gui.h>
#include <easy_path/easy_path.h>

struct ak_gui_image_manager
{
    /// A pointer to the virtual file system to use to load image files.
    easyvfs_context* pVFS;

    /// A pointer to the GUI context.
    easygui_context* pGUI;


    /// The right-facing arrow image.
    easygui_image* pArrowRight;

    /// The right-down-facing arrow image.
    easygui_image* pArrowRightDown;

    /// The red cross image.
    easygui_image* pRedCross;
};

/// Creates an image from an SVG string.
PRIVATE easygui_image* ak_load_svg_from_string(ak_gui_image_manager* pIM, char* svg, unsigned int width, unsigned int height);


ak_gui_image_manager* ak_create_gui_image_manager(easyvfs_context* pVFS, easygui_context* pGUI)
{
    if (pVFS == NULL || pGUI == NULL) {
        return NULL;
    }

    ak_gui_image_manager* pIM = malloc(sizeof(*pIM));
    if (pIM == NULL) {
        return NULL;
    }

    pIM->pVFS = pVFS;
    pIM->pGUI = pGUI;

    pIM->pArrowRight     = NULL;
    pIM->pArrowRightDown = NULL;
    pIM->pRedCross       = NULL;

    return pIM;
}

void ak_delete_gui_image_manager(ak_gui_image_manager* pIM)
{
    if (pIM == NULL) {
        return;
    }

    // TODO: Unload every image that was loaded from a file.

    ak_unload_image(pIM, pIM->pArrowRight);
    ak_unload_image(pIM, pIM->pArrowRightDown);
    ak_unload_image(pIM, pIM->pRedCross);

    free(pIM);
}


easygui_image* ak_load_vector_image_from_file(ak_gui_image_manager* pIM, const char* fileName, unsigned int width, unsigned int height)
{
    if (pIM == NULL || fileName == NULL || width == 0 || height == 0) {
        return NULL;
    }

    // TODO: Find an already-loaded image of the same name and increment reference counter if exists.

    // Currently, only SVG is supported.
    if (!easypath_extension_equal(fileName, "svg")) {
        return NULL;
    }

    char* svg = easyvfs_open_and_read_text_file(pIM->pVFS, fileName, NULL);
    if (svg == NULL) {
        return NULL;
    }

    easygui_image* pImage = ak_load_svg_from_string(pIM, svg, width, height);

    easyvfs_free(svg);
    return pImage;
}

void ak_unload_image(ak_gui_image_manager* pIM, easygui_image* pImage)
{
    if (pIM == NULL || pImage == NULL) {
        return;
    }

    // TODO: Reference count.

    easygui_delete_image(pImage);
}

easygui_image* ak_get_arrow_right_image(ak_gui_image_manager* pIM)
{
    if (pIM == NULL) {
        return NULL;
    }

    if (pIM->pArrowRight == NULL)
    {
        char svg[] = {
            0x3C, 0x3F, 0x78, 0x6D, 0x6C, 0x20, 0x76, 0x65, 0x72, 0x73, 0x69, 0x6F, 
            0x6E, 0x3D, 0x22, 0x31, 0x2E, 0x30, 0x22, 0x20, 0x65, 0x6E, 0x63, 0x6F, 
            0x64, 0x69, 0x6E, 0x67, 0x3D, 0x22, 0x55, 0x54, 0x46, 0x2D, 0x38, 0x22, 
            0x20, 0x73, 0x74, 0x61, 0x6E, 0x64, 0x61, 0x6C, 0x6F, 0x6E, 0x65, 0x3D, 
            0x22, 0x6E, 0x6F, 0x22, 0x3F, 0x3E, 0x0A, 0x3C, 0x73, 0x76, 0x67, 0x0A, 
            0x20, 0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x64, 0x63, 0x3D, 
            0x22, 0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x70, 0x75, 0x72, 0x6C, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x64, 0x63, 0x2F, 0x65, 0x6C, 0x65, 0x6D, 
            0x65, 0x6E, 0x74, 0x73, 0x2F, 0x31, 0x2E, 0x31, 0x2F, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x63, 0x63, 0x3D, 0x22, 
            0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x63, 0x72, 0x65, 0x61, 0x74, 
            0x69, 0x76, 0x65, 0x63, 0x6F, 0x6D, 0x6D, 0x6F, 0x6E, 0x73, 0x2E, 0x6F, 
            0x72, 0x67, 0x2F, 0x6E, 0x73, 0x23, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x78, 
            0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x72, 0x64, 0x66, 0x3D, 0x22, 0x68, 0x74, 
            0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 0x2E, 
            0x6F, 0x72, 0x67, 0x2F, 0x31, 0x39, 0x39, 0x39, 0x2F, 0x30, 0x32, 0x2F, 
            0x32, 0x32, 0x2D, 0x72, 0x64, 0x66, 0x2D, 0x73, 0x79, 0x6E, 0x74, 0x61, 
            0x78, 0x2D, 0x6E, 0x73, 0x23, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x78, 0x6D, 
            0x6C, 0x6E, 0x73, 0x3A, 0x73, 0x76, 0x67, 0x3D, 0x22, 0x68, 0x74, 0x74, 
            0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 0x2E, 0x6F, 
            0x72, 0x67, 0x2F, 0x32, 0x30, 0x30, 0x30, 0x2F, 0x73, 0x76, 0x67, 0x22, 
            0x0A, 0x20, 0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3D, 0x22, 0x68, 
            0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x32, 0x30, 0x30, 0x30, 0x2F, 0x73, 0x76, 
            0x67, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x76, 0x65, 0x72, 0x73, 0x69, 0x6F, 
            0x6E, 0x3D, 0x22, 0x31, 0x2E, 0x31, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x69, 
            0x64, 0x3D, 0x22, 0x73, 0x76, 0x67, 0x32, 0x22, 0x0A, 0x20, 0x20, 0x20, 
            0x76, 0x69, 0x65, 0x77, 0x42, 0x6F, 0x78, 0x3D, 0x22, 0x30, 0x20, 0x30, 
            0x20, 0x32, 0x35, 0x36, 0x20, 0x32, 0x35, 0x36, 0x22, 0x0A, 0x20, 0x20, 
            0x20, 0x68, 0x65, 0x69, 0x67, 0x68, 0x74, 0x3D, 0x22, 0x32, 0x35, 0x36, 
            0x22, 0x0A, 0x20, 0x20, 0x20, 0x77, 0x69, 0x64, 0x74, 0x68, 0x3D, 0x22, 
            0x32, 0x35, 0x36, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x64, 0x65, 0x66, 
            0x73, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x64, 
            0x65, 0x66, 0x73, 0x34, 0x22, 0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 
            0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 0x74, 0x61, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 
            0x74, 0x61, 0x37, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x72, 
            0x64, 0x66, 0x3A, 0x52, 0x44, 0x46, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x3C, 0x63, 0x63, 0x3A, 0x57, 0x6F, 0x72, 0x6B, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x64, 0x66, 0x3A, 
            0x61, 0x62, 0x6F, 0x75, 0x74, 0x3D, 0x22, 0x22, 0x3E, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x66, 0x6F, 
            0x72, 0x6D, 0x61, 0x74, 0x3E, 0x69, 0x6D, 0x61, 0x67, 0x65, 0x2F, 0x73, 
            0x76, 0x67, 0x2B, 0x78, 0x6D, 0x6C, 0x3C, 0x2F, 0x64, 0x63, 0x3A, 0x66, 
            0x6F, 0x72, 0x6D, 0x61, 0x74, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x74, 0x79, 0x70, 0x65, 0x0A, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 
            0x64, 0x66, 0x3A, 0x72, 0x65, 0x73, 0x6F, 0x75, 0x72, 0x63, 0x65, 0x3D, 
            0x22, 0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x70, 0x75, 0x72, 0x6C, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x64, 0x63, 0x2F, 0x64, 0x63, 0x6D, 0x69, 
            0x74, 0x79, 0x70, 0x65, 0x2F, 0x53, 0x74, 0x69, 0x6C, 0x6C, 0x49, 0x6D, 
            0x61, 0x67, 0x65, 0x22, 0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x74, 0x69, 0x74, 0x6C, 
            0x65, 0x3E, 0x3C, 0x2F, 0x64, 0x63, 0x3A, 0x74, 0x69, 0x74, 0x6C, 0x65, 
            0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x63, 
            0x63, 0x3A, 0x6C, 0x69, 0x63, 0x65, 0x6E, 0x73, 0x65, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x64, 0x66, 
            0x3A, 0x72, 0x65, 0x73, 0x6F, 0x75, 0x72, 0x63, 0x65, 0x3D, 0x22, 0x22, 
            0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x2F, 
            0x63, 0x63, 0x3A, 0x57, 0x6F, 0x72, 0x6B, 0x3E, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x3C, 0x2F, 0x72, 0x64, 0x66, 0x3A, 0x52, 0x44, 0x46, 0x3E, 0x0A, 
            0x20, 0x20, 0x3C, 0x2F, 0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 0x74, 0x61, 
            0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x67, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x73, 0x74, 0x79, 0x6C, 0x65, 0x3D, 0x22, 0x64, 0x69, 0x73, 0x70, 0x6C, 
            0x61, 0x79, 0x3A, 0x69, 0x6E, 0x6C, 0x69, 0x6E, 0x65, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x66, 0x6F, 0x72, 
            0x6D, 0x3D, 0x22, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x6C, 0x61, 0x74, 0x65, 
            0x28, 0x30, 0x2C, 0x2D, 0x37, 0x39, 0x36, 0x2E, 0x33, 0x36, 0x32, 0x31, 
            0x36, 0x29, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 
            0x22, 0x6C, 0x61, 0x79, 0x65, 0x72, 0x31, 0x22, 0x3E, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x3C, 0x70, 0x61, 0x74, 0x68, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x64, 0x3D, 0x22, 0x6D, 0x20, 0x32, 0x33, 0x38, 0x2E, 
            0x38, 0x35, 0x31, 0x2C, 0x39, 0x32, 0x34, 0x2E, 0x33, 0x36, 0x32, 0x31, 
            0x38, 0x20, 0x2D, 0x31, 0x31, 0x30, 0x2E, 0x38, 0x35, 0x31, 0x30, 0x31, 
            0x2C, 0x36, 0x33, 0x2E, 0x39, 0x39, 0x39, 0x38, 0x35, 0x20, 0x2D, 0x31, 
            0x31, 0x30, 0x2E, 0x38, 0x35, 0x30, 0x39, 0x38, 0x38, 0x2C, 0x36, 0x33, 
            0x2E, 0x39, 0x39, 0x39, 0x38, 0x37, 0x20, 0x38, 0x65, 0x2D, 0x36, 0x2C, 
            0x2D, 0x31, 0x32, 0x37, 0x2E, 0x39, 0x39, 0x39, 0x37, 0x32, 0x20, 0x2D, 
            0x38, 0x65, 0x2D, 0x36, 0x2C, 0x2D, 0x31, 0x32, 0x37, 0x2E, 0x39, 0x39, 
            0x39, 0x37, 0x20, 0x4C, 0x20, 0x31, 0x32, 0x38, 0x2C, 0x38, 0x36, 0x30, 
            0x2E, 0x33, 0x36, 0x32, 0x33, 0x34, 0x20, 0x5A, 0x22, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x70, 0x61, 0x74, 
            0x68, 0x34, 0x31, 0x35, 0x34, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x73, 0x74, 0x79, 0x6C, 0x65, 0x3D, 0x22, 0x66, 0x69, 0x6C, 
            0x6C, 0x3A, 0x23, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3B, 0x66, 0x69, 
            0x6C, 0x6C, 0x2D, 0x6F, 0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 0x31, 
            0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x77, 0x69, 0x64, 0x74, 
            0x68, 0x3A, 0x33, 0x32, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 
            0x6D, 0x69, 0x74, 0x65, 0x72, 0x6C, 0x69, 0x6D, 0x69, 0x74, 0x3A, 0x34, 
            0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x64, 0x61, 0x73, 0x68, 
            0x61, 0x72, 0x72, 0x61, 0x79, 0x3A, 0x6E, 0x6F, 0x6E, 0x65, 0x22, 0x20, 
            0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x2F, 0x67, 0x3E, 0x0A, 0x3C, 0x2F, 
            0x73, 0x76, 0x67, 0x3E, 0x0A, 0x00
        };

        pIM->pArrowRight = ak_load_svg_from_string(pIM, svg, 8, 8);
    }

    return pIM->pArrowRight;
}

easygui_image* ak_get_arrow_right_down_image(ak_gui_image_manager* pIM)
{
    if (pIM == NULL) {
        return NULL;
    }

    if (pIM->pArrowRightDown == NULL)
    {
        char svg[] = {
            0x3C, 0x3F, 0x78, 0x6D, 0x6C, 0x20, 0x76, 0x65, 0x72, 0x73, 0x69, 0x6F, 
            0x6E, 0x3D, 0x22, 0x31, 0x2E, 0x30, 0x22, 0x20, 0x65, 0x6E, 0x63, 0x6F, 
            0x64, 0x69, 0x6E, 0x67, 0x3D, 0x22, 0x55, 0x54, 0x46, 0x2D, 0x38, 0x22, 
            0x20, 0x73, 0x74, 0x61, 0x6E, 0x64, 0x61, 0x6C, 0x6F, 0x6E, 0x65, 0x3D, 
            0x22, 0x6E, 0x6F, 0x22, 0x3F, 0x3E, 0x0A, 0x3C, 0x73, 0x76, 0x67, 0x0A, 
            0x20, 0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x64, 0x63, 0x3D, 
            0x22, 0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x70, 0x75, 0x72, 0x6C, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x64, 0x63, 0x2F, 0x65, 0x6C, 0x65, 0x6D, 
            0x65, 0x6E, 0x74, 0x73, 0x2F, 0x31, 0x2E, 0x31, 0x2F, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x63, 0x63, 0x3D, 0x22, 
            0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x63, 0x72, 0x65, 0x61, 0x74, 
            0x69, 0x76, 0x65, 0x63, 0x6F, 0x6D, 0x6D, 0x6F, 0x6E, 0x73, 0x2E, 0x6F, 
            0x72, 0x67, 0x2F, 0x6E, 0x73, 0x23, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x78, 
            0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x72, 0x64, 0x66, 0x3D, 0x22, 0x68, 0x74, 
            0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 0x2E, 
            0x6F, 0x72, 0x67, 0x2F, 0x31, 0x39, 0x39, 0x39, 0x2F, 0x30, 0x32, 0x2F, 
            0x32, 0x32, 0x2D, 0x72, 0x64, 0x66, 0x2D, 0x73, 0x79, 0x6E, 0x74, 0x61, 
            0x78, 0x2D, 0x6E, 0x73, 0x23, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x78, 0x6D, 
            0x6C, 0x6E, 0x73, 0x3A, 0x73, 0x76, 0x67, 0x3D, 0x22, 0x68, 0x74, 0x74, 
            0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 0x2E, 0x6F, 
            0x72, 0x67, 0x2F, 0x32, 0x30, 0x30, 0x30, 0x2F, 0x73, 0x76, 0x67, 0x22, 
            0x0A, 0x20, 0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3D, 0x22, 0x68, 
            0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x32, 0x30, 0x30, 0x30, 0x2F, 0x73, 0x76, 
            0x67, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x76, 0x65, 0x72, 0x73, 0x69, 0x6F, 
            0x6E, 0x3D, 0x22, 0x31, 0x2E, 0x31, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x69, 
            0x64, 0x3D, 0x22, 0x73, 0x76, 0x67, 0x32, 0x22, 0x0A, 0x20, 0x20, 0x20, 
            0x76, 0x69, 0x65, 0x77, 0x42, 0x6F, 0x78, 0x3D, 0x22, 0x30, 0x20, 0x30, 
            0x20, 0x32, 0x35, 0x36, 0x20, 0x32, 0x35, 0x36, 0x22, 0x0A, 0x20, 0x20, 
            0x20, 0x68, 0x65, 0x69, 0x67, 0x68, 0x74, 0x3D, 0x22, 0x32, 0x35, 0x36, 
            0x22, 0x0A, 0x20, 0x20, 0x20, 0x77, 0x69, 0x64, 0x74, 0x68, 0x3D, 0x22, 
            0x32, 0x35, 0x36, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x64, 0x65, 0x66, 
            0x73, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x64, 
            0x65, 0x66, 0x73, 0x34, 0x22, 0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 
            0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 0x74, 0x61, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 
            0x74, 0x61, 0x37, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x72, 
            0x64, 0x66, 0x3A, 0x52, 0x44, 0x46, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x3C, 0x63, 0x63, 0x3A, 0x57, 0x6F, 0x72, 0x6B, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x64, 0x66, 0x3A, 
            0x61, 0x62, 0x6F, 0x75, 0x74, 0x3D, 0x22, 0x22, 0x3E, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x66, 0x6F, 
            0x72, 0x6D, 0x61, 0x74, 0x3E, 0x69, 0x6D, 0x61, 0x67, 0x65, 0x2F, 0x73, 
            0x76, 0x67, 0x2B, 0x78, 0x6D, 0x6C, 0x3C, 0x2F, 0x64, 0x63, 0x3A, 0x66, 
            0x6F, 0x72, 0x6D, 0x61, 0x74, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x74, 0x79, 0x70, 0x65, 0x0A, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 
            0x64, 0x66, 0x3A, 0x72, 0x65, 0x73, 0x6F, 0x75, 0x72, 0x63, 0x65, 0x3D, 
            0x22, 0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x70, 0x75, 0x72, 0x6C, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x64, 0x63, 0x2F, 0x64, 0x63, 0x6D, 0x69, 
            0x74, 0x79, 0x70, 0x65, 0x2F, 0x53, 0x74, 0x69, 0x6C, 0x6C, 0x49, 0x6D, 
            0x61, 0x67, 0x65, 0x22, 0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x74, 0x69, 0x74, 0x6C, 
            0x65, 0x3E, 0x3C, 0x2F, 0x64, 0x63, 0x3A, 0x74, 0x69, 0x74, 0x6C, 0x65, 
            0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x63, 
            0x63, 0x3A, 0x6C, 0x69, 0x63, 0x65, 0x6E, 0x73, 0x65, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x64, 0x66, 
            0x3A, 0x72, 0x65, 0x73, 0x6F, 0x75, 0x72, 0x63, 0x65, 0x3D, 0x22, 0x22, 
            0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x2F, 
            0x63, 0x63, 0x3A, 0x57, 0x6F, 0x72, 0x6B, 0x3E, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x3C, 0x2F, 0x72, 0x64, 0x66, 0x3A, 0x52, 0x44, 0x46, 0x3E, 0x0A, 
            0x20, 0x20, 0x3C, 0x2F, 0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 0x74, 0x61, 
            0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x67, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x73, 0x74, 0x79, 0x6C, 0x65, 0x3D, 0x22, 0x64, 0x69, 0x73, 0x70, 0x6C, 
            0x61, 0x79, 0x3A, 0x69, 0x6E, 0x6C, 0x69, 0x6E, 0x65, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x66, 0x6F, 0x72, 
            0x6D, 0x3D, 0x22, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x6C, 0x61, 0x74, 0x65, 
            0x28, 0x30, 0x2C, 0x2D, 0x37, 0x39, 0x36, 0x2E, 0x33, 0x36, 0x32, 0x31, 
            0x36, 0x29, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 
            0x22, 0x6C, 0x61, 0x79, 0x65, 0x72, 0x31, 0x22, 0x3E, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x3C, 0x70, 0x61, 0x74, 0x68, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x66, 0x6F, 0x72, 0x6D, 
            0x3D, 0x22, 0x6D, 0x61, 0x74, 0x72, 0x69, 0x78, 0x28, 0x2D, 0x31, 0x2C, 
            0x30, 0x2E, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x2C, 0x30, 
            0x2C, 0x30, 0x2E, 0x38, 0x36, 0x36, 0x30, 0x32, 0x35, 0x34, 0x32, 0x2C, 
            0x32, 0x35, 0x36, 0x2C, 0x31, 0x33, 0x32, 0x2E, 0x34, 0x31, 0x35, 0x35, 
            0x32, 0x29, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x64, 
            0x3D, 0x22, 0x6D, 0x20, 0x32, 0x33, 0x38, 0x2E, 0x38, 0x35, 0x31, 0x2C, 
            0x39, 0x32, 0x34, 0x2E, 0x33, 0x36, 0x32, 0x31, 0x38, 0x20, 0x2D, 0x31, 
            0x31, 0x30, 0x2E, 0x38, 0x35, 0x31, 0x30, 0x31, 0x2C, 0x36, 0x33, 0x2E, 
            0x39, 0x39, 0x39, 0x38, 0x35, 0x20, 0x2D, 0x31, 0x31, 0x30, 0x2E, 0x38, 
            0x35, 0x30, 0x39, 0x38, 0x38, 0x2C, 0x36, 0x33, 0x2E, 0x39, 0x39, 0x39, 
            0x38, 0x37, 0x20, 0x38, 0x65, 0x2D, 0x36, 0x2C, 0x2D, 0x31, 0x32, 0x37, 
            0x2E, 0x39, 0x39, 0x39, 0x37, 0x32, 0x20, 0x2D, 0x38, 0x65, 0x2D, 0x36, 
            0x2C, 0x2D, 0x31, 0x32, 0x37, 0x2E, 0x39, 0x39, 0x39, 0x37, 0x20, 0x4C, 
            0x20, 0x31, 0x32, 0x38, 0x2C, 0x38, 0x36, 0x30, 0x2E, 0x33, 0x36, 0x32, 
            0x33, 0x34, 0x20, 0x5A, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x69, 0x64, 0x3D, 0x22, 0x70, 0x61, 0x74, 0x68, 0x34, 0x31, 0x35, 
            0x34, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x73, 0x74, 
            0x79, 0x6C, 0x65, 0x3D, 0x22, 0x66, 0x69, 0x6C, 0x6C, 0x3A, 0x23, 0x66, 
            0x66, 0x66, 0x66, 0x66, 0x66, 0x3B, 0x66, 0x69, 0x6C, 0x6C, 0x2D, 0x6F, 
            0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 0x31, 0x3B, 0x73, 0x74, 0x72, 
            0x6F, 0x6B, 0x65, 0x2D, 0x77, 0x69, 0x64, 0x74, 0x68, 0x3A, 0x33, 0x32, 
            0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x6D, 0x69, 0x74, 0x65, 
            0x72, 0x6C, 0x69, 0x6D, 0x69, 0x74, 0x3A, 0x34, 0x3B, 0x73, 0x74, 0x72, 
            0x6F, 0x6B, 0x65, 0x2D, 0x64, 0x61, 0x73, 0x68, 0x61, 0x72, 0x72, 0x61, 
            0x79, 0x3A, 0x6E, 0x6F, 0x6E, 0x65, 0x22, 0x20, 0x2F, 0x3E, 0x0A, 0x20, 
            0x20, 0x3C, 0x2F, 0x67, 0x3E, 0x0A, 0x3C, 0x2F, 0x73, 0x76, 0x67, 0x3E, 
            0x0A, 0x00
        };

        pIM->pArrowRightDown = ak_load_svg_from_string(pIM, svg, 8, 8);
    }

    return pIM->pArrowRightDown;
}

easygui_image* ak_get_red_cross_image(ak_gui_image_manager* pIM)
{
    if (pIM == NULL) {
        return NULL;
    }

    if (pIM->pRedCross == NULL)
    {
        char svg[] = {
            0x3C, 0x3F, 0x78, 0x6D, 0x6C, 0x20, 0x76, 0x65, 0x72, 0x73, 0x69, 0x6F, 
            0x6E, 0x3D, 0x22, 0x31, 0x2E, 0x30, 0x22, 0x20, 0x65, 0x6E, 0x63, 0x6F, 
            0x64, 0x69, 0x6E, 0x67, 0x3D, 0x22, 0x55, 0x54, 0x46, 0x2D, 0x38, 0x22, 
            0x20, 0x73, 0x74, 0x61, 0x6E, 0x64, 0x61, 0x6C, 0x6F, 0x6E, 0x65, 0x3D, 
            0x22, 0x6E, 0x6F, 0x22, 0x3F, 0x3E, 0x0A, 0x3C, 0x73, 0x76, 0x67, 0x0A, 
            0x20, 0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x64, 0x63, 0x3D, 
            0x22, 0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x70, 0x75, 0x72, 0x6C, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x64, 0x63, 0x2F, 0x65, 0x6C, 0x65, 0x6D, 
            0x65, 0x6E, 0x74, 0x73, 0x2F, 0x31, 0x2E, 0x31, 0x2F, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x63, 0x63, 0x3D, 0x22, 
            0x68, 0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x63, 0x72, 0x65, 0x61, 0x74, 
            0x69, 0x76, 0x65, 0x63, 0x6F, 0x6D, 0x6D, 0x6F, 0x6E, 0x73, 0x2E, 0x6F, 
            0x72, 0x67, 0x2F, 0x6E, 0x73, 0x23, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x78, 
            0x6D, 0x6C, 0x6E, 0x73, 0x3A, 0x72, 0x64, 0x66, 0x3D, 0x22, 0x68, 0x74, 
            0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 0x2E, 
            0x6F, 0x72, 0x67, 0x2F, 0x31, 0x39, 0x39, 0x39, 0x2F, 0x30, 0x32, 0x2F, 
            0x32, 0x32, 0x2D, 0x72, 0x64, 0x66, 0x2D, 0x73, 0x79, 0x6E, 0x74, 0x61, 
            0x78, 0x2D, 0x6E, 0x73, 0x23, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x78, 0x6D, 
            0x6C, 0x6E, 0x73, 0x3A, 0x73, 0x76, 0x67, 0x3D, 0x22, 0x68, 0x74, 0x74, 
            0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 0x2E, 0x6F, 
            0x72, 0x67, 0x2F, 0x32, 0x30, 0x30, 0x30, 0x2F, 0x73, 0x76, 0x67, 0x22, 
            0x0A, 0x20, 0x20, 0x20, 0x78, 0x6D, 0x6C, 0x6E, 0x73, 0x3D, 0x22, 0x68, 
            0x74, 0x74, 0x70, 0x3A, 0x2F, 0x2F, 0x77, 0x77, 0x77, 0x2E, 0x77, 0x33, 
            0x2E, 0x6F, 0x72, 0x67, 0x2F, 0x32, 0x30, 0x30, 0x30, 0x2F, 0x73, 0x76, 
            0x67, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x76, 0x65, 0x72, 0x73, 0x69, 0x6F, 
            0x6E, 0x3D, 0x22, 0x31, 0x2E, 0x31, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x69, 
            0x64, 0x3D, 0x22, 0x73, 0x76, 0x67, 0x33, 0x33, 0x34, 0x33, 0x22, 0x0A, 
            0x20, 0x20, 0x20, 0x76, 0x69, 0x65, 0x77, 0x42, 0x6F, 0x78, 0x3D, 0x22, 
            0x30, 0x20, 0x30, 0x20, 0x32, 0x35, 0x36, 0x20, 0x32, 0x35, 0x36, 0x22, 
            0x0A, 0x20, 0x20, 0x20, 0x68, 0x65, 0x69, 0x67, 0x68, 0x74, 0x3D, 0x22, 
            0x32, 0x35, 0x36, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x77, 0x69, 0x64, 0x74, 
            0x68, 0x3D, 0x22, 0x32, 0x35, 0x36, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 
            0x64, 0x65, 0x66, 0x73, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 
            0x3D, 0x22, 0x64, 0x65, 0x66, 0x73, 0x33, 0x33, 0x34, 0x35, 0x22, 0x3E, 
            0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x6D, 0x61, 0x72, 0x6B, 0x65, 0x72, 
            0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x73, 0x74, 0x79, 0x6C, 
            0x65, 0x3D, 0x22, 0x6F, 0x76, 0x65, 0x72, 0x66, 0x6C, 0x6F, 0x77, 0x3A, 
            0x76, 0x69, 0x73, 0x69, 0x62, 0x6C, 0x65, 0x22, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x41, 0x72, 0x72, 0x6F, 
            0x77, 0x31, 0x4C, 0x73, 0x74, 0x61, 0x72, 0x74, 0x22, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x65, 0x66, 0x58, 0x3D, 0x22, 0x30, 
            0x2E, 0x30, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 
            0x65, 0x66, 0x59, 0x3D, 0x22, 0x30, 0x2E, 0x30, 0x22, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x6F, 0x72, 0x69, 0x65, 0x6E, 0x74, 0x3D, 
            0x22, 0x61, 0x75, 0x74, 0x6F, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x3C, 0x70, 0x61, 0x74, 0x68, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x66, 0x6F, 
            0x72, 0x6D, 0x3D, 0x22, 0x73, 0x63, 0x61, 0x6C, 0x65, 0x28, 0x30, 0x2E, 
            0x38, 0x29, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x6C, 0x61, 0x74, 0x65, 
            0x28, 0x31, 0x32, 0x2E, 0x35, 0x2C, 0x30, 0x29, 0x22, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x73, 0x74, 0x79, 0x6C, 0x65, 
            0x3D, 0x22, 0x66, 0x69, 0x6C, 0x6C, 0x2D, 0x72, 0x75, 0x6C, 0x65, 0x3A, 
            0x65, 0x76, 0x65, 0x6E, 0x6F, 0x64, 0x64, 0x3B, 0x73, 0x74, 0x72, 0x6F, 
            0x6B, 0x65, 0x3A, 0x23, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3B, 0x73, 
            0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x77, 0x69, 0x64, 0x74, 0x68, 0x3A, 
            0x31, 0x70, 0x74, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x6F, 
            0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 0x31, 0x3B, 0x66, 0x69, 0x6C, 
            0x6C, 0x3A, 0x23, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3B, 0x66, 0x69, 
            0x6C, 0x6C, 0x2D, 0x6F, 0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 0x31, 
            0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x64, 
            0x3D, 0x22, 0x4D, 0x20, 0x30, 0x2E, 0x30, 0x2C, 0x30, 0x2E, 0x30, 0x20, 
            0x4C, 0x20, 0x35, 0x2E, 0x30, 0x2C, 0x2D, 0x35, 0x2E, 0x30, 0x20, 0x4C, 
            0x20, 0x2D, 0x31, 0x32, 0x2E, 0x35, 0x2C, 0x30, 0x2E, 0x30, 0x20, 0x4C, 
            0x20, 0x35, 0x2E, 0x30, 0x2C, 0x35, 0x2E, 0x30, 0x20, 0x4C, 0x20, 0x30, 
            0x2E, 0x30, 0x2C, 0x30, 0x2E, 0x30, 0x20, 0x7A, 0x20, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 
            0x70, 0x61, 0x74, 0x68, 0x34, 0x31, 0x35, 0x37, 0x22, 0x20, 0x2F, 0x3E, 
            0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x2F, 0x6D, 0x61, 0x72, 0x6B, 0x65, 
            0x72, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x6D, 0x61, 0x72, 0x6B, 
            0x65, 0x72, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x73, 0x74, 
            0x79, 0x6C, 0x65, 0x3D, 0x22, 0x6F, 0x76, 0x65, 0x72, 0x66, 0x6C, 0x6F, 
            0x77, 0x3A, 0x76, 0x69, 0x73, 0x69, 0x62, 0x6C, 0x65, 0x3B, 0x22, 0x0A, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x41, 
            0x72, 0x72, 0x6F, 0x77, 0x31, 0x4C, 0x65, 0x6E, 0x64, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x65, 0x66, 0x58, 0x3D, 0x22, 
            0x30, 0x2E, 0x30, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x72, 0x65, 0x66, 0x59, 0x3D, 0x22, 0x30, 0x2E, 0x30, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x6F, 0x72, 0x69, 0x65, 0x6E, 0x74, 
            0x3D, 0x22, 0x61, 0x75, 0x74, 0x6F, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x3C, 0x70, 0x61, 0x74, 0x68, 0x0A, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x66, 
            0x6F, 0x72, 0x6D, 0x3D, 0x22, 0x73, 0x63, 0x61, 0x6C, 0x65, 0x28, 0x30, 
            0x2E, 0x38, 0x29, 0x20, 0x72, 0x6F, 0x74, 0x61, 0x74, 0x65, 0x28, 0x31, 
            0x38, 0x30, 0x29, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x6C, 0x61, 0x74, 
            0x65, 0x28, 0x31, 0x32, 0x2E, 0x35, 0x2C, 0x30, 0x29, 0x22, 0x0A, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x73, 0x74, 0x79, 0x6C, 
            0x65, 0x3D, 0x22, 0x66, 0x69, 0x6C, 0x6C, 0x2D, 0x72, 0x75, 0x6C, 0x65, 
            0x3A, 0x65, 0x76, 0x65, 0x6E, 0x6F, 0x64, 0x64, 0x3B, 0x73, 0x74, 0x72, 
            0x6F, 0x6B, 0x65, 0x3A, 0x23, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3B, 
            0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x77, 0x69, 0x64, 0x74, 0x68, 
            0x3A, 0x31, 0x70, 0x74, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 
            0x6F, 0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 0x31, 0x3B, 0x66, 0x69, 
            0x6C, 0x6C, 0x3A, 0x23, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3B, 0x66, 
            0x69, 0x6C, 0x6C, 0x2D, 0x6F, 0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 
            0x31, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x64, 0x3D, 0x22, 0x4D, 0x20, 0x30, 0x2E, 0x30, 0x2C, 0x30, 0x2E, 0x30, 
            0x20, 0x4C, 0x20, 0x35, 0x2E, 0x30, 0x2C, 0x2D, 0x35, 0x2E, 0x30, 0x20, 
            0x4C, 0x20, 0x2D, 0x31, 0x32, 0x2E, 0x35, 0x2C, 0x30, 0x2E, 0x30, 0x20, 
            0x4C, 0x20, 0x35, 0x2E, 0x30, 0x2C, 0x35, 0x2E, 0x30, 0x20, 0x4C, 0x20, 
            0x30, 0x2E, 0x30, 0x2C, 0x30, 0x2E, 0x30, 0x20, 0x7A, 0x20, 0x22, 0x0A, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 
            0x22, 0x70, 0x61, 0x74, 0x68, 0x34, 0x31, 0x36, 0x30, 0x22, 0x20, 0x2F, 
            0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x2F, 0x6D, 0x61, 0x72, 0x6B, 
            0x65, 0x72, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x2F, 0x64, 0x65, 0x66, 0x73, 
            0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x6D, 0x65, 0x74, 0x61, 0x64, 0x61, 0x74, 
            0x61, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x6D, 
            0x65, 0x74, 0x61, 0x64, 0x61, 0x74, 0x61, 0x33, 0x33, 0x34, 0x38, 0x22, 
            0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x72, 0x64, 0x66, 0x3A, 0x52, 
            0x44, 0x46, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x63, 
            0x63, 0x3A, 0x57, 0x6F, 0x72, 0x6B, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x72, 0x64, 0x66, 0x3A, 0x61, 0x62, 0x6F, 0x75, 
            0x74, 0x3D, 0x22, 0x22, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x3C, 0x64, 0x63, 0x3A, 0x66, 0x6F, 0x72, 0x6D, 0x61, 0x74, 
            0x3E, 0x69, 0x6D, 0x61, 0x67, 0x65, 0x2F, 0x73, 0x76, 0x67, 0x2B, 0x78, 
            0x6D, 0x6C, 0x3C, 0x2F, 0x64, 0x63, 0x3A, 0x66, 0x6F, 0x72, 0x6D, 0x61, 
            0x74, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3C, 
            0x64, 0x63, 0x3A, 0x74, 0x79, 0x70, 0x65, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x72, 0x64, 0x66, 0x3A, 0x72, 
            0x65, 0x73, 0x6F, 0x75, 0x72, 0x63, 0x65, 0x3D, 0x22, 0x68, 0x74, 0x74, 
            0x70, 0x3A, 0x2F, 0x2F, 0x70, 0x75, 0x72, 0x6C, 0x2E, 0x6F, 0x72, 0x67, 
            0x2F, 0x64, 0x63, 0x2F, 0x64, 0x63, 0x6D, 0x69, 0x74, 0x79, 0x70, 0x65, 
            0x2F, 0x53, 0x74, 0x69, 0x6C, 0x6C, 0x49, 0x6D, 0x61, 0x67, 0x65, 0x22, 
            0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x3C, 0x64, 0x63, 0x3A, 0x74, 0x69, 0x74, 0x6C, 0x65, 0x3E, 0x3C, 0x2F, 
            0x64, 0x63, 0x3A, 0x74, 0x69, 0x74, 0x6C, 0x65, 0x3E, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x3C, 0x2F, 0x63, 0x63, 0x3A, 0x57, 0x6F, 0x72, 
            0x6B, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x3C, 0x2F, 0x72, 0x64, 0x66, 
            0x3A, 0x52, 0x44, 0x46, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x2F, 0x6D, 0x65, 
            0x74, 0x61, 0x64, 0x61, 0x74, 0x61, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x67, 
            0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x66, 
            0x6F, 0x72, 0x6D, 0x3D, 0x22, 0x74, 0x72, 0x61, 0x6E, 0x73, 0x6C, 0x61, 
            0x74, 0x65, 0x28, 0x30, 0x2C, 0x2D, 0x37, 0x39, 0x36, 0x2E, 0x33, 0x36, 
            0x32, 0x31, 0x39, 0x29, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 
            0x64, 0x3D, 0x22, 0x6C, 0x61, 0x79, 0x65, 0x72, 0x31, 0x22, 0x3E, 0x0A, 
            0x20, 0x20, 0x20, 0x20, 0x3C, 0x70, 0x61, 0x74, 0x68, 0x0A, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x69, 0x64, 0x3D, 0x22, 0x70, 0x61, 0x74, 
            0x68, 0x33, 0x33, 0x35, 0x31, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x64, 0x3D, 0x22, 0x4D, 0x20, 0x32, 0x35, 0x2E, 0x39, 0x31, 
            0x32, 0x30, 0x38, 0x39, 0x2C, 0x38, 0x32, 0x32, 0x2E, 0x32, 0x37, 0x34, 
            0x32, 0x36, 0x20, 0x32, 0x33, 0x30, 0x2E, 0x30, 0x38, 0x37, 0x39, 0x31, 
            0x2C, 0x31, 0x30, 0x32, 0x36, 0x2E, 0x34, 0x35, 0x30, 0x31, 0x22, 0x0A, 
            0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x73, 0x74, 0x79, 0x6C, 0x65, 
            0x3D, 0x22, 0x66, 0x69, 0x6C, 0x6C, 0x3A, 0x6E, 0x6F, 0x6E, 0x65, 0x3B, 
            0x66, 0x69, 0x6C, 0x6C, 0x2D, 0x72, 0x75, 0x6C, 0x65, 0x3A, 0x65, 0x76, 
            0x65, 0x6E, 0x6F, 0x64, 0x64, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 
            0x3A, 0x23, 0x65, 0x30, 0x34, 0x64, 0x34, 0x64, 0x3B, 0x73, 0x74, 0x72, 
            0x6F, 0x6B, 0x65, 0x2D, 0x77, 0x69, 0x64, 0x74, 0x68, 0x3A, 0x34, 0x36, 
            0x2E, 0x31, 0x34, 0x31, 0x34, 0x32, 0x36, 0x30, 0x39, 0x3B, 0x73, 0x74, 
            0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x6C, 0x69, 0x6E, 0x65, 0x63, 0x61, 0x70, 
            0x3A, 0x72, 0x6F, 0x75, 0x6E, 0x64, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 
            0x65, 0x2D, 0x6C, 0x69, 0x6E, 0x65, 0x6A, 0x6F, 0x69, 0x6E, 0x3A, 0x6D, 
            0x69, 0x74, 0x65, 0x72, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 
            0x6D, 0x69, 0x74, 0x65, 0x72, 0x6C, 0x69, 0x6D, 0x69, 0x74, 0x3A, 0x34, 
            0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x64, 0x61, 0x73, 0x68, 
            0x61, 0x72, 0x72, 0x61, 0x79, 0x3A, 0x6E, 0x6F, 0x6E, 0x65, 0x3B, 0x73, 
            0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x6F, 0x70, 0x61, 0x63, 0x69, 0x74, 
            0x79, 0x3A, 0x31, 0x22, 0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x3C, 0x70, 0x61, 0x74, 0x68, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x69, 0x64, 0x3D, 0x22, 0x70, 0x61, 0x74, 0x68, 0x34, 0x34, 0x35, 
            0x39, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x64, 0x3D, 
            0x22, 0x4D, 0x20, 0x32, 0x33, 0x30, 0x2E, 0x30, 0x38, 0x37, 0x39, 0x31, 
            0x2C, 0x38, 0x32, 0x32, 0x2E, 0x32, 0x37, 0x34, 0x32, 0x36, 0x20, 0x32, 
            0x35, 0x2E, 0x39, 0x31, 0x32, 0x30, 0x38, 0x39, 0x2C, 0x31, 0x30, 0x32, 
            0x36, 0x2E, 0x34, 0x35, 0x30, 0x31, 0x22, 0x0A, 0x20, 0x20, 0x20, 0x20, 
            0x20, 0x20, 0x20, 0x73, 0x74, 0x79, 0x6C, 0x65, 0x3D, 0x22, 0x66, 0x69, 
            0x6C, 0x6C, 0x3A, 0x6E, 0x6F, 0x6E, 0x65, 0x3B, 0x66, 0x69, 0x6C, 0x6C, 
            0x2D, 0x72, 0x75, 0x6C, 0x65, 0x3A, 0x65, 0x76, 0x65, 0x6E, 0x6F, 0x64, 
            0x64, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x3A, 0x23, 0x65, 0x30, 
            0x34, 0x64, 0x34, 0x64, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 
            0x77, 0x69, 0x64, 0x74, 0x68, 0x3A, 0x34, 0x36, 0x2E, 0x31, 0x34, 0x31, 
            0x34, 0x32, 0x36, 0x30, 0x39, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 
            0x2D, 0x6C, 0x69, 0x6E, 0x65, 0x63, 0x61, 0x70, 0x3A, 0x72, 0x6F, 0x75, 
            0x6E, 0x64, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x6C, 0x69, 
            0x6E, 0x65, 0x6A, 0x6F, 0x69, 0x6E, 0x3A, 0x6D, 0x69, 0x74, 0x65, 0x72, 
            0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 0x65, 0x2D, 0x6D, 0x69, 0x74, 0x65, 
            0x72, 0x6C, 0x69, 0x6D, 0x69, 0x74, 0x3A, 0x34, 0x3B, 0x73, 0x74, 0x72, 
            0x6F, 0x6B, 0x65, 0x2D, 0x64, 0x61, 0x73, 0x68, 0x61, 0x72, 0x72, 0x61, 
            0x79, 0x3A, 0x6E, 0x6F, 0x6E, 0x65, 0x3B, 0x73, 0x74, 0x72, 0x6F, 0x6B, 
            0x65, 0x2D, 0x6F, 0x70, 0x61, 0x63, 0x69, 0x74, 0x79, 0x3A, 0x31, 0x22, 
            0x20, 0x2F, 0x3E, 0x0A, 0x20, 0x20, 0x3C, 0x2F, 0x67, 0x3E, 0x0A, 0x3C, 
            0x2F, 0x73, 0x76, 0x67, 0x3E, 0x0A, 0x00
        };

        pIM->pRedCross = ak_load_svg_from_string(pIM, svg, 10, 10);
    }

    return pIM->pRedCross;
}



PRIVATE easygui_image* ak_load_svg_from_string(ak_gui_image_manager* pIM, char* svg, unsigned int width, unsigned int height)
{
    NSVGimage* pSVGImage = nsvgParse(svg, "px", 96);
    if (pSVGImage == NULL) {
        easyvfs_free(svg);
        return NULL;
    }

    const float scale = (float)width / pSVGImage->width;
    int svgWidth  = (int)pSVGImage->width;
    int svgHeight = (int)pSVGImage->height;

    // At this point we have loaded the image and now we need to rasterize it.
    void* pImageData = malloc(svgWidth * svgHeight * 4);
    if (pImageData == NULL) {
        nsvgDelete(pSVGImage);
        return NULL;
    }

    NSVGrasterizer* pSVGRast = nsvgCreateRasterizer();
    if (pSVGRast == NULL) {
        nsvgDelete(pSVGImage);
        return NULL;
    }

    nsvgRasterize(pSVGRast, pSVGImage, 0, 0, scale, pImageData, (int)svgWidth, (int)svgHeight, (int)svgWidth*4);

    nsvgDeleteRasterizer(pSVGRast);
    nsvgDelete(pSVGImage);


    // At this point we have the rasterized image and we can create the easy_gui image resource.
    easygui_image* pImage = easygui_create_image(pIM->pGUI, width, height, svgWidth*4, pImageData);

    free(pImageData);
    return pImage;
}


/*
This is free and unencumbered software released into the public domain.

Anyone is free to copy, modify, publish, use, compile, sell, or
distribute this software, either in source code form or as a compiled
binary, for any purpose, commercial or non-commercial, and by any
means.

In jurisdictions that recognize copyright laws, the author or authors
of this software dedicate any and all copyright interest in the
software to the public domain. We make this dedication for the benefit
of the public at large and to the detriment of our heirs and
successors. We intend this dedication to be an overt act of
relinquishment in perpetuity of all present and future rights to this
software under copyright law.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR
OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

For more information, please refer to <http://unlicense.org/>
*/
